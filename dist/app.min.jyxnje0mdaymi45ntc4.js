(function(){angular.module("websiteApp",[]),angular.module("websiteApp").filter("capitalize",function(){return function(input){return input?(str=input.toLowerCase(),data=[],str.split(" ").forEach(function(sp){data.push(sp.charAt(0).toUpperCase()+sp.slice(1))}),data.join(" ")):"";var str,data}}),angular.module("websiteApp").run(function($rootScope){$rootScope.websiteUrl="https://raid-codex.com",$rootScope.apiUrl="https://raid-codex.github.io/data/"}),angular.module("websiteApp").factory("GoogleAnalytics",function(){return this.ga=function(p1,p2){"function"==typeof ga&&ga(p1,p2)},this.event=function(category,action,label,value){this.ga("send",{hitType:"event",eventCategory:category,eventAction:action,eventLabel:label,eventValue:value})},this}),angular.module("websiteApp").factory("Champions",function($http,$q,$rootScope){return this.all=function(){var deferred=$q.defer();return $http({method:"GET",url:$rootScope.apiUrl+"/champions/current/index.json"}).then(deferred.resolve,deferred.reject),deferred.promise},this}),angular.module("websiteApp").factory("Factions",function($http,$q,$rootScope){return this.all=function(){var deferred=$q.defer();return $http({method:"GET",url:$rootScope.apiUrl+"/factions/current/index.json"}).then(deferred.resolve,deferred.reject),deferred.promise},this}),angular.module("websiteApp").factory("StatusEffects",function($http,$q,$rootScope){return this.all=function(){var deferred=$q.defer();return $http({method:"GET",url:$rootScope.apiUrl+"/status-effects/current/index.json"}).then(deferred.resolve,deferred.reject),deferred.promise},this})}).apply(this),function(){angular.module("websiteApp").controller("ChampionComparatorCtrl",function($scope,$location,$filter,GoogleAnalytics,Champions,$q){function refreshLoc(){var str=[];$scope.cmpList.forEach(function(champion){str.push(champion.name),GoogleAnalytics.event("ChampionComparator","Champion",champion.name,$scope.cmpList.length)});var obj={};$scope.cmpStats.forEach(function(stat){GoogleAnalytics.event("ChampionComparator","Stat",stat,$scope.cmpStats.length)}),$scope.cmpStats.length>0&&(obj.stats=$scope.cmpStats.join(",")),str.length>0&&(obj.champions=str.join(",")),$location.search(obj)}var deferred;$scope.allowedStats={rarity:{},element:{},type:{},"rating.overall":{header:"Rating (overall)"},"rating.campaign":{header:"Rating (campaign)"},"rating.clan_boss_without_giant_slayer":{header:"Rating (clan boss no GS)"},"rating.clan_boss_with_giant_slayer":{header:"Rating (clan boss with GS)"},"rating.arena_offense":{header:"Rating (arena)"},"rating.arena_defense":{header:"Rating (defense arena)"},"rating.ice_guardian":{header:"Rating (Ice Golem's Peak)"},"rating.dragon":{header:"Rating (Draong's Lair)"},"rating.spider":{header:"Rating (Spider's Den)"},"rating.fire_knight":{header:"Rating (Fire Knight's Castle)"},"rating.minotaur":{header:"Rating (Minotaur's Labyrinth)"},"rating.force_dungeon":{header:"Rating (Force Keep)"},"rating.spirit_dungeon":{header:"Rating (Spirit Keep)"},"rating.void_dungeon":{header:"Rating (Void Keep)"},"rating.magic_dungeon":{header:"Rating (Magic Keep)"}},$scope.addToCompareList=function(champion){-1===$scope.cmpList.indexOf(champion)&&($scope.cmpList.push(champion),$scope.search.name="",refreshLoc(),GoogleAnalytics.event("ChampionComparator","AddChampion",champion.name,$scope.cmpList.length))},$scope.removeFromCompareList=function(champion){var index=$scope.cmpList.indexOf(champion);index>-1&&($scope.cmpList.splice(index,1),refreshLoc(),GoogleAnalytics.event("ChampionComparator","RemoveChampion",champion.name,$scope.cmpList.length))},$scope.getChampionAttr=function(champion,attr){var value=champion;return attr.split(".").forEach(function(data_attr){value=value[data_attr]}),value},$scope.getHeader=function(attr){return $scope.allowedStats[attr]&&$scope.allowedStats[attr].header?$scope.allowedStats[attr].header:$filter("capitalize")(attr)},$scope.statClick=function(stat){var index=$scope.cmpStats.indexOf(stat);index>-1?($scope.cmpStats.splice(index,1),GoogleAnalytics.event("ChampionComparator","RemoveStat",stat,$scope.cmpStats.length)):($scope.cmpStats.push(stat),GoogleAnalytics.event("ChampionComparator","AddStat",stat,$scope.cmpStats.length)),refreshLoc()},$scope.cmpList=[],$scope.cmpStats=["rarity","rating.overall"],(deferred=$q.defer(),Champions.all().then(function(res){$scope.champions=res.data,$scope.championsByName={},$scope.champions.forEach(function(champion){$scope.championsByName[champion.name]=champion}),deferred.resolve()},function(err){console.error(err),deferred.reject()}),deferred.promise).then(function(){!function(){var obj=$location.search();if(obj.champions&&""!==obj.champions){var champions=obj.champions.split(",");champions.forEach(function(name){$scope.cmpList.push($scope.championsByName[name])})}if(obj.stats&&""!==obj.stats){var stats=obj.stats.split(",");$scope.cmpStats=[],stats.forEach(function(stat){$scope.allowedStats[stat]&&$scope.cmpStats.push(stat)})}0===$scope.cmpStats.length&&setDefaultCmpStatus(),refreshLoc()}()})})}.apply(this),function(){angular.module("websiteApp").controller("ChampionListCtrl",function($scope,$location,$filter,GoogleAnalytics,Champions,$q){})}.apply(this),function(){angular.module("websiteApp").directive("championList",function(){return{restrict:"E",scope:{showFilters:"="},controller:function($scope,$location,$filter,GoogleAnalytics,Champions,$q,Factions,StatusEffects){var deferred,self=this;function filterStatusEffect(key,value){if(self.filterData[key]&&self.filterData[key].length>0){var slugs=[];self.filterData[key].forEach(function(type){slugs+=self.effectsSlugByType[type]});for(var i=0;i<value.skills.length;i++){var j;for(j=0;j<value.skills[i].effects.length;j++)if(slugs&&-1!==slugs.indexOf(value.skills[i].effects[j].slug))return!0;for(j=0;j<value.skills[i].upgrades.length;j++)for(var k=0;k<value.skills[i].upgrades[j].effects.length;k++)if(slugs&&-1!==slugs.indexOf(value.skills[i].upgrades[j].effects[k].slug))return!0}return!1}return!0}self.filterData={},this.filterChampions=function(value,index,array){return(!self.filterData.name||""===self.filterData.name||-1!==value.name.toLowerCase().indexOf(self.filterData.name.toLowerCase()))&&(!(self.filterData.faction&&self.filterData.faction.length>0&&-1===self.filterData.faction.indexOf(value.faction_slug))&&(!!filterStatusEffect("buff",value)&&(!!filterStatusEffect("debuff",value)&&(!(self.filterData.type&&self.filterData.type.length>0&&-1===self.filterData.type.indexOf(value.type))&&!(self.filterData.element&&self.filterData.element.length>0&&-1===self.filterData.element.indexOf(value.element))))))},this.emptySelect=function(v){v&&v.splice(0,v.length)},$q.all([(deferred=$q.defer(),Champions.all().then(function(res){self.champions=res.data,self.championsByName={},self.champions.forEach(function(champion){self.championsByName[champion.name]=champion}),deferred.resolve()},function(err){console.error(err),deferred.reject()}),deferred.promise),function(){var deferred=$q.defer();return Factions.all().then(function(res){self.factions=res.data,deferred.resolve()},function(err){console.error(err),deferred.reject()}),deferred.promise}(),function(){var deferred=$q.defer();return StatusEffects.all().then(function(res){self.statusEffects=res.data,self.effectsSlugByType={},self.effectsBySlug={},self.statusEffects.forEach(function(effect){self.effectsSlugByType[effect.type]||(self.effectsSlugByType[effect.type]=[]),self.effectsBySlug[effect.slug]=effect,self.effectsSlugByType[effect.type].push(effect.slug)}),deferred.resolve()},function(err){console.error(err),deferred.reject()}),deferred.promise}()]).then(function(){console.log("loaded")})},controllerAs:"$ctrl",bindToController:!0,templateUrl:"app/directives/champion-list/champion-list.html"}})}.apply(this),function(){angular.module("websiteApp").directive("championRarity",function(){return{restrict:"E",scope:{champion:"="},templateUrl:"app/directives/champion-rarity/champion-rarity.html",replace:!0}})}.apply(this),function(){angular.module("websiteApp").directive("championRating",function(){return{restrict:"E",scope:{rating:"="},controller:function($scope){$scope.faForPosition=function(pos){switch(pos){case 1:return-1===["C","B","A","S","SS"].indexOf($scope.rating)?"far":"fas";case 2:return-1===["B","A","S","SS"].indexOf($scope.rating)?"far":"fas";case 3:return-1===["A","S","SS"].indexOf($scope.rating)?"far":"fas";case 4:return-1===["S","SS"].indexOf($scope.rating)?"far":"fas";case 5:return-1===["SS"].indexOf($scope.rating)?"far":"fas"}}},controllerAs:"$ctrl",bindToController:!0,templateUrl:"app/directives/champion-rating/champion-rating.html",replace:!0}})}.apply(this),angular.module("websiteApp").run(["$templateCache",function($templateCache){$templateCache.put("app/champion-comparator/champion-comparator.html",'<div ng-controller="ChampionComparatorCtrl">\n    <div class="row row-eq-height">\n        <div class="col-xs-12">\n            <span class="btn btn-just-icon" ng-click="showFilters = !showFilters">\n                <i class="fa fa-filter"></i>\n            </span>\n        </div>\n    </div>\n    <div class="row" ng-if="showFilters">\n        <div class="col-xs-12">\n            <div class="row">\n                <div class="col-xs-12">\n                    <span class="btn" ng-if="cmpStats.indexOf(stat) > -1" style="background-color: green;"\n                        ng-repeat="(stat, _) in allowedStats" ng-click="statClick(stat)">\n                        <i class="fa fa-check"></i> {{ getHeader(stat) }}\n                    </span>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    <span class="btn" ng-if="cmpStats.indexOf(stat) === -1" ng-repeat="(stat, _) in allowedStats"\n                        ng-click="statClick(stat)">\n                        <i class="fa fa-times"></i> {{ getHeader(stat) }}\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <table class="centered table-responsive table-hover table champion-list-table">\n                <thead>\n                    <tr class="row-header">\n                        <th colspan=2>\n                            Name\n                        </th>\n                        <th ng-repeat="data in cmpStats">\n                            {{ getHeader(data) }}\n                        </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-if="cmpList.length == 0">\n                        <td colspan="{{ 2 + cmpStats.length }}" class="centered">\n                            Add a champion to start comparing\n                        </td>\n                    </tr>\n                    <tr ng-repeat="champion in cmpList">\n                        <td>\n                            <span class="btn btn-mini btn-just-icon" style="background-color: red;"\n                                ng-click="removeFromCompareList(champion)">\n                                <i class=" fa fa-times"></i>\n                            </span>\n                        </td>\n                        <td>\n                            <strong>\n                                <a href="{{ $root.websiteUrl }}{{ champion.website_link }}">\n                                    {{ champion.name }}\n                                </a>\n                            </strong>\n                        </td>\n                        <td ng-repeat="data in cmpStats">\n                            <span ng-switch="data">\n                                <span ng-switch-when="rarity">\n                                    <champion-rarity champion="champion"></champion-rarity>\n                                </span>\n                                <span ng-switch-default>\n                                    <span ng-if="data.substr(0, 7) === \'rating.\'">\n                                        <champion-rating rating="getChampionAttr(champion, data)"></champion-rating>\n                                    </span>\n                                    <span ng-if="data.substr(0, 7) !== \'rating.\'">\n                                        {{ getChampionAttr(champion, data) }}\n                                    </span>\n                                </span>\n                            </span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan="{{ cmpStats.length + 2 }}">\n                            <div class="wpdreams_asl_container asl_w asl_m asl_m_1">\n                                <div class="probox">\n                                    <div class="promagnifier">\n                                        <div class="innericon">\n                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg"\n                                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                                                height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512"\n                                                xml:space="preserve">\n                                                <path id="magnifier-2-icon" d="M460.355,421.59L353.844,315.078c20.041-27.553,31.885-61.437,31.885-98.037\n                                                                            C385.729,124.934,310.793,50,218.686,50C126.58,50,51.645,124.934,51.645,217.041c0,92.106,74.936,167.041,167.041,167.041\n                                                                            c34.912,0,67.352-10.773,94.184-29.158L419.945,462L460.355,421.59z M100.631,217.041c0-65.096,52.959-118.056,118.055-118.056\n                                                                            c65.098,0,118.057,52.959,118.057,118.056c0,65.096-52.959,118.056-118.057,118.056C153.59,335.097,100.631,282.137,100.631,217.041\n                                                                            z"></path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class="prosettings" style="display:none;" data-opened="0">\n                                        <div class="innericon">\n                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg"\n                                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                                                height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512"\n                                                xml:space="preserve">\n                                                <polygon id="arrow-25-icon" transform="rotate(90 256 256)"\n                                                    points="142.332,104.886 197.48,50 402.5,256 197.48,462 142.332,407.113 292.727,256 ">\n                                                </polygon>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class="proinput">\n                                        <form autocomplete="off" aria-label="Search form" class="form-group">\n                                            <input aria-label="Search input" type="search" class="orig form-control"\n                                                name="phrase" placeholder="Enter the name of the Champion" value=""\n                                                autocomplete="off" ng-model="search.name">\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="row row-eq-height" ng-if="search.name && search.name !== \'\'">\n                                <div class="col-xs-12">\n                                    <span class="btn btn-primary" ng-click="addToCompareList(champion)"\n                                        ng-repeat="champion in champions | filter:search:false"\n                                        ng-if="cmpList.indexOf(champion) === -1">\n                                        <i class="fa fa-plus"></i> {{ champion.name }}\n                                    </span>\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'),$templateCache.put("app/champion-list/champion-list.html",'<div ng-controller="ChampionListCtrl">\n    <champion-list show-filters="true"></champion-list>\n</div>'),$templateCache.put("app/directives/champion-list/champion-list.html",'<div class="row ng-champion-list">\n    <div class="col-xs-12 col-sm-3 col-md-2">\n        <div ng-if="$ctrl.showFilters">\n            <div class="row">\n                <div class="col-xs-12">\n                    <h2>Filters</h2>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    Name\n                </div>\n                <div class="col-xs-12">\n                    <input type="text" ng-model="$ctrl.filterData.name" class="input-text form-control">\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    Type <i class="fa fa-times" ng-click="$ctrl.emptySelect($ctrl.filterData.type)"></i>\n                </div>\n                <div class="col-xs-12">\n                    <select class="form-control" ng-model="$ctrl.filterData.type" multiple>\n                        <option value="HP">HP</option>\n                        <option value="Attack">Attack</option>\n                        <option value="Def">Defense</option>\n                        <option value="Assist">Support</option>\n                    </select>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    Element <i class="fa fa-times" ng-click="$ctrl.emptySelect($ctrl.filterData.element)"></i>\n                </div>\n                <div class="col-xs-12">\n                    <select class="form-control" ng-model="$ctrl.filterData.element" multiple>\n                        <option value="Spirit">Spirit</option>\n                        <option value="Force">Force</option>\n                        <option value="Void">Void</option>\n                        <option value="Magic">Magic</option>\n                    </select>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    Faction <i class="fa fa-times" ng-click="$ctrl.emptySelect($ctrl.filterData.faction)"></i>\n                </div>\n                <div class="col-xs-12">\n                    <select class="form-control" ng-model="$ctrl.filterData.faction" multiple>\n                        <option ng-repeat="faction in $ctrl.factions" value="{{ faction.slug }}">{{ faction.name }}\n                        </option>\n                    </select>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    Buffs <i class="fa fa-times" ng-click="$ctrl.emptySelect($ctrl.filterData.buff)"></i>\n                </div>\n                <div class="col-xs-12">\n                    <select class="form-control" ng-model="$ctrl.filterData.buff" multiple>\n                        <option ng-repeat="(effectType, slugs) in $ctrl.effectsSlugByType" value="{{ effectType }}"\n                            ng-if="$ctrl.effectsBySlug[slugs[0]].effect_type === \'buff\'"\n                            style="background-image:url(\'https://raid-codex.com/wp-content/uploads/status-effects/{{$ctrl.effectsBySlug[slugs[0]].image_slug}}.png\'); background-size: auto 80%; background-repeat: no-repeat;">\n                            &nbsp; &nbsp; {{ effectType }}\n                        </option>\n                    </select>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    Debuffs <i class="fa fa-times" ng-click="$ctrl.emptySelect($ctrl.filterData.debuff)"></i>\n                </div>\n                <div class="col-xs-12">\n                    <select class="form-control" ng-model="$ctrl.filterData.debuff" multiple>\n                        <option ng-repeat="(effectType, slugs) in $ctrl.effectsSlugByType" value="{{ effectType }}"\n                            ng-if="$ctrl.effectsBySlug[slugs[0]].effect_type === \'debuff\'"\n                            style="background-image:url(\'https://raid-codex.com/wp-content/uploads/status-effects/{{$ctrl.effectsBySlug[slugs[0]].image_slug}}.png\'); background-size: auto 80%; background-repeat: no-repeat;">\n                            &nbsp; &nbsp; {{ effectType }}\n                        </option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="col-xs-12 col-sm-9 col-md-10">\n        <div class="row">\n            <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 champion-single"\n                ng-repeat="champion in $ctrl.champions | filter:$ctrl.filterChampions">\n                <a href="https://raid-codex.com{{champion.website_link}}">\n                    <div class="row">\n                        <div class="col-xs-12">\n                            <img class="champion-img champion-{{champion.rarity | lowercase }}"\n                                ng-src="https://raid-codex.com/wp-content/uploads/hashed-img/{{champion.thumbnail}}.png"\n                                alt="{{ champion.name }}">\n                        </div>\n                        <div class="col-xs-12">\n                            <span class="champion-name">{{ champion.name }}</span><br>\n                            <champion-rating rating="champion.rating.overall"></champion-rating>\n                        </div>\n                    </div>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>'),$templateCache.put("app/directives/champion-rarity/champion-rarity.html",'<span class="champion-rarity champion-rarity-{{ champion.rarity | lowercase }}">\n    {{ champion.rarity }}\n</span>'),$templateCache.put("app/directives/champion-rating/champion-rating.html",'<span class="champion-rating champion-rating-{{ $ctrl.rating }}">\n    <i class="fa-star" ng-class="faForPosition(1)"></i>\n    <i class="fa-star" ng-class="faForPosition(2)"></i>\n    <i class="fa-star" ng-class="faForPosition(3)"></i>\n    <i class="fa-star" ng-class="faForPosition(4)"></i>\n    <i class="fa-star" ng-class="faForPosition(5)"></i>\n</span>')}]);